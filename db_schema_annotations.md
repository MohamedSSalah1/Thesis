
# Cardiovascular Risk Prediction Database: Tables and Annotations

This document outlines the schema of the cardiovascular disease prediction database, including all tables used for storing clinicians, patients, prediction models, risk scores, and output visualisations.

---

## 1. Clinician Table
```sql
CREATE TABLE `Clinician` (
    `clinician_id` INT(11) NOT NULL AUTO_INCREMENT,  -- Unique identifier for each clinician
    `name` VARCHAR(255) NOT NULL,
    `email` VARCHAR(255) NOT NULL,  -- Unique email used for login or reference
    `password` VARCHAR(255) NOT NULL,  -- Password for authentication

    PRIMARY KEY (`clinician_id`),
    UNIQUE KEY (`email`)  -- Ensures no duplicate accounts
);
```
Each clinician is uniquely identified and secured. Email is enforced to be unique to prevent duplicate registrations. The primary key (clinician_id) uniquely identifies each clinician. The table includes fields for name), email (VARCHAR with a unique constraint to prevent duplicates), and password (VARCHAR for securely storing credentials). This schema ensures secure and efficient management of clinician accounts within the system. 

---

## 2. Patient Table
```sql
CREATE TABLE `Patient` (
    `patient_id` INT(11) NOT NULL AUTO_INCREMENT,
    `name` VARCHAR(255) NOT NULL,
    `age` INT(11) NOT NULL,
    `clinician_id` INT(11) DEFAULT NULL,  -- Links the patient to their assigned clinician

    PRIMARY KEY (`patient_id`),
    KEY (`clinician_id`),  -- Index to improve JOIN performance
    FOREIGN KEY (`clinician_id`) REFERENCES `Clinician`(`clinician_id`)
);
```
Each patient record optionally links to a clinician, supporting multi-user environments.This table stores patient demographic information and links each patient to their assigned clinician. The primary key (patient_id) uniquely identifies each patient. The clinician_id field serves as a foreign key, establishing a relationship with the Clinicians table to track which clinician is responsible for each patient. This schema ensures structured patient data management within the system

---

## 3. Model Table
```sql
CREATE TABLE `Model` (
    `model_id` INT(11) NOT NULL AUTO_INCREMENT,
    `model_name` VARCHAR(255) NOT NULL,  -- E.g. 'Classical COX-PH Model', 'Elastic Net COX-PH' 
    `model_type` VARCHAR(100) NOT NULL,  -- E.g. 'CNN', 'XGBoost', 'Logistic Regression'

    PRIMARY KEY (`model_id`)
);
```
Stores metadata about ML models used in the risk prediction pipeline. The primary key (model_id) is an uniquely identifies each model. The model_name field stores the model’s name, while model_type categorises the model (e.g., Cox-PH). This schema allows efficient organisation and retrieval of trained models within the system.

---

## 4. Risk Table
```sql
CREATE TABLE `Risk` (
    `risk_id` INT(11) NOT NULL AUTO_INCREMENT,
    `patient_id` INT(11) NOT NULL,
    `model_id` INT(11) NOT NULL,
    `risk_score` DECIMAL(5,2) NOT NULL,  -- Risk prediction output (0.00 to 100.00)
    `prediction_date` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY (`risk_id`),
    KEY (`patient_id`),
    KEY (`model_id`),
    FOREIGN KEY (`patient_id`) REFERENCES `Patient`(`patient_id`),
    FOREIGN KEY (`model_id`) REFERENCES `Model`(`model_id`)
);
```
Tracks all prediction outputs per patient/model combination. Scores are timestamped and stored with precision. This table stores cardiovascular disease risk predictions generated by machine learning models. The primary key (risk_id) uniquely identifies each risk assessment instance. The patient_id field links the prediction to a specific patient, while model_id  references the ML model used for risk estimation. The risk_score field (DECIMAL) stores the predicted risk percentage, and prediction_date (TIMESTAMP) records the time the prediction was generated, with a default value of CURRENT_TIMESTAMP. Additionally, the table is designed to later include all patient-specific features from the dataset, allowing comprehensive storage of both input variables and model outputs. This structure enables tracking of risk assessment trends and feature contributions over time.

---

## 5. Output Table
```sql
CREATE TABLE `Output` (
    `output_id` INT(11) NOT NULL AUTO_INCREMENT,
    `risk_id` INT(11) NOT NULL,  -- Links to a specific risk prediction
    `plot_type` VARCHAR(100) NOT NULL,  -- E.g. 'ROC Curve', 'Confusion Matrix'
    `generated_at` TIMESTAMP DEFAULT CURRENT_TIMESTAMP,

    PRIMARY KEY (`output_id`),
    KEY (`risk_id`),
    FOREIGN KEY (`risk_id`) REFERENCES `Risk`(`risk_id`)
);
```
Stores visual output metadata generated after model inference — e.g., ROC curves, heatmaps etc. This table stores generated visualisations and reports related to cardiovascular disease risk predictions. The primary key (output_id)  uniquely identifies each output. The risk_id field  acts as a foreign key linking outputs to specific risk scores. The plot_type field specifies the type of visualization. The generated_at field (TIMESTAMP) records the creation time of each output, with a default value of CURRENT_TIMESTAMP for automatic logging.

---

## 6. Features Table
```sql
CREATE TABLE `Features` (
    `feature_id` INT(11) NOT NULL AUTO_INCREMENT,
    `feature_name` VARCHAR(255) NOT NULL,  -- E.g., 'Age', 'Blood Pressure'
    `feature_description` TEXT,

    PRIMARY KEY (`feature_id`)
);
```
The `Features` table stores information about individual input variables used by machine learning models for cardiovascular risk prediction. This table captures metadata about features (independent variables) used in model training and inference.
Each feature represents a variable input into one or more models, examples include:
- Cholesterol level
- Heart rate
- Blood pressure
  
---

## 7. Model_Features Join Table
```sql
CREATE TABLE `Model_Features` (
    `model_id` INT(11) NOT NULL,
    `feature_id` INT(11) NOT NULL,

    PRIMARY KEY (`model_id`, `feature_id`),  -- Composite primary key
    FOREIGN KEY (`model_id`) REFERENCES `ML_Models`(`model_id`),
    FOREIGN KEY (`feature_id`) REFERENCES `Features`(`feature_id`)
);
```
This table represents a many-to-many relationship between machine learning models and the features they use. The purpose of the `Model_Features` table is to associate specific features with specific machine learning models, especially because:
- One feature (like “age”) can be used by multiple models
- One model (like “Lasso Cox”) can use multiple features

So this is a classic many-to-many relationship, and Model_Features is the join/association table between ML_Models and Features.

## Notes
- All primary keys are `AUTO_INCREMENT` integers for easy reference.
- Timestamp fields (`prediction_date`, `generated_at`) allow for auditing model performance over time.
- Relationships are clearly defined using foreign keys — ensuring referential integrity across patients, clinicians, models, and predictions.
- The design supports future extensions such as uploading actual image outputs or prediction reports.
